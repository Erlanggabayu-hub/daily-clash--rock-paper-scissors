<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock Paper Scissors</title>
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --bg: #0f0f1a;
      --surface: #1a1a2e;
      --border: #2a2a4a;
      --text: #e0e0f0;
      --text-dim: #8888aa;
      --accent: #7c5cfc;
      --accent-glow: rgba(124, 92, 252, 0.3);
      --win: #34d399;
      --lose: #f87171;
      --tie: #fbbf24;
      --rock: #f87171;
      --paper: #60a5fa;
      --scissors: #fbbf24;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1.5rem 1rem;
      overflow-x: hidden;
    }

    header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    header h1 {
      font-size: 2.2rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--rock), var(--paper), var(--scissors));
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: -0.5px;
    }

    header p {
      color: var(--text-dim);
      font-size: 0.9rem;
      margin-top: 0.3rem;
    }

    .scoreboard {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      width: 100%;
      max-width: 420px;
    }

    .score-card {
      flex: 1;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.8rem;
      text-align: center;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .score-card.player-card { border-top: 3px solid var(--accent); }
    .score-card.computer-card { border-top: 3px solid var(--text-dim); }

    .score-card .label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--text-dim);
      margin-bottom: 0.3rem;
    }

    .score-card .score {
      font-size: 2rem;
      font-weight: 800;
      font-variant-numeric: tabular-nums;
    }

    .score-card.player-card .score { color: var(--accent); }
    .score-card.computer-card .score { color: var(--text-dim); }

    .score-card.pulse {
      animation: scorePulse 0.4s ease;
    }

    @keyframes scorePulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .arena {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 2rem;
      min-height: 120px;
      width: 100%;
      max-width: 420px;
    }

    .arena-pick {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.4rem;
      opacity: 0;
      transform: scale(0.5);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .arena-pick.visible {
      opacity: 1;
      transform: scale(1);
    }

    .arena-pick .pick-emoji {
      font-size: 3.5rem;
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 50%;
      transition: border-color 0.3s;
    }

    .arena-pick.winner .pick-emoji {
      border-color: var(--win);
      box-shadow: 0 0 20px rgba(52, 211, 153, 0.3);
    }

    .arena-pick .pick-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-dim);
    }

    .arena-vs {
      font-size: 1.2rem;
      font-weight: 800;
      color: var(--text-dim);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .arena-vs.visible { opacity: 1; }

    .result-banner {
      text-align: center;
      margin-bottom: 2rem;
      min-height: 60px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .result-banner .result-text {
      font-size: 1.4rem;
      font-weight: 800;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.4s ease 0.2s, transform 0.4s ease 0.2s;
    }

    .result-banner .result-text.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .result-banner .result-text.win { color: var(--win); }
    .result-banner .result-text.lose { color: var(--lose); }
    .result-banner .result-text.tie { color: var(--tie); }

    .result-banner .result-detail {
      font-size: 0.85rem;
      color: var(--text-dim);
      opacity: 0;
      transition: opacity 0.4s ease 0.35s;
    }

    .result-banner .result-detail.visible { opacity: 1; }

    .choices {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .choice-btn {
      width: 90px;
      height: 90px;
      border-radius: 20px;
      border: 2px solid var(--border);
      background: var(--surface);
      cursor: pointer;
      font-size: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.15s ease, border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      position: relative;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }

    .choice-btn::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 18px;
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .choice-btn[data-choice="rock"]::after { background: radial-gradient(circle, rgba(248,113,113,0.15) 0%, transparent 70%); }
    .choice-btn[data-choice="paper"]::after { background: radial-gradient(circle, rgba(96,165,250,0.15) 0%, transparent 70%); }
    .choice-btn[data-choice="scissors"]::after { background: radial-gradient(circle, rgba(251,191,36,0.15) 0%, transparent 70%); }

    .choice-btn:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    }

    .choice-btn:hover::after { opacity: 1; }

    .choice-btn[data-choice="rock"]:hover { border-color: var(--rock); }
    .choice-btn[data-choice="paper"]:hover { border-color: var(--paper); }
    .choice-btn[data-choice="scissors"]:hover { border-color: var(--scissors); }

    .choice-btn:active {
      transform: translateY(-2px) scale(0.97);
    }

    .choice-btn.disabled {
      pointer-events: none;
      opacity: 0.4;
    }

    .choice-btn .choice-label {
      position: absolute;
      bottom: -22px;
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-dim);
      white-space: nowrap;
    }

    .actions {
      display: flex;
      gap: 0.7rem;
      margin-bottom: 2rem;
    }

    .btn {
      padding: 0.5rem 1.2rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, border-color 0.2s, transform 0.1s;
      -webkit-tap-highlight-color: transparent;
    }

    .btn:hover {
      background: var(--border);
      border-color: var(--text-dim);
    }

    .btn:active { transform: scale(0.97); }

    .btn-accent {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }

    .btn-accent:hover {
      background: #6a4ce8;
      border-color: #6a4ce8;
    }

    .streak-bar {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 2rem;
      padding: 0.5rem 1rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 0.8rem;
      opacity: 0;
      transform: translateY(5px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .streak-bar.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .streak-bar .streak-fire { font-size: 1rem; }

    .streak-bar .streak-count {
      font-weight: 800;
      color: var(--tie);
    }

    .history {
      width: 100%;
      max-width: 420px;
      margin-bottom: 2rem;
    }

    .history-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--text-dim);
      margin-bottom: 0.5rem;
    }

    .history-list {
      display: flex;
      gap: 0.4rem;
      flex-wrap: wrap;
    }

    .history-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      opacity: 0;
      animation: dotIn 0.3s ease forwards;
    }

    .history-dot.win { background: var(--win); }
    .history-dot.lose { background: var(--lose); }
    .history-dot.tie { background: var(--tie); }

    @keyframes dotIn {
      from { opacity: 0; transform: scale(0); }
      to { opacity: 1; transform: scale(1); }
    }

    .rules {
      width: 100%;
      max-width: 420px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }

    .rules-toggle {
      width: 100%;
      padding: 0.8rem 1rem;
      background: none;
      border: none;
      color: var(--text-dim);
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      -webkit-tap-highlight-color: transparent;
    }

    .rules-toggle:hover { color: var(--text); }

    .rules-toggle .arrow {
      transition: transform 0.2s ease;
      font-size: 0.7rem;
    }

    .rules-toggle.open .arrow { transform: rotate(180deg); }

    .rules-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .rules-content.open { max-height: 200px; }

    .rules-content ul {
      list-style: none;
      padding: 0 1rem 0.8rem;
    }

    .rules-content li {
      font-size: 0.8rem;
      color: var(--text-dim);
      padding: 0.25rem 0;
    }

    .rules-content li span { margin-right: 0.4rem; }

    .confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 100;
      overflow: hidden;
    }

    .confetti-piece {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 2px;
      animation: confettiFall 1.5s ease-out forwards;
    }

    @keyframes confettiFall {
      0% {
        transform: translateY(-20px) rotate(0deg) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg) scale(0.5);
        opacity: 0;
      }
    }

    @media (max-width: 480px) {
      header h1 { font-size: 1.7rem; }
      .choice-btn { width: 78px; height: 78px; font-size: 2.1rem; }
      .arena-pick .pick-emoji { width: 65px; height: 65px; font-size: 2.8rem; }
      .arena { gap: 1rem; }
    }
  </style>
</head>
<body>

  <header>
    <h1>Rock Paper Scissors</h1>
    <p>Choose your weapon</p>
  </header>

  <div class="scoreboard">
    <div class="score-card player-card" id="playerCard">
      <div class="label">You</div>
      <div class="score" id="playerScore">0</div>
    </div>
    <div class="score-card computer-card" id="computerCard">
      <div class="label">CPU</div>
      <div class="score" id="computerScore">0</div>
    </div>
  </div>

  <div class="arena" id="arena">
    <div class="arena-pick" id="playerPick">
      <div class="pick-emoji" id="playerEmoji"></div>
      <div class="pick-label">You</div>
    </div>
    <div class="arena-vs" id="vsText">VS</div>
    <div class="arena-pick" id="computerPick">
      <div class="pick-emoji" id="computerEmoji"></div>
      <div class="pick-label">CPU</div>
    </div>
  </div>

  <div class="result-banner" id="resultBanner">
    <div class="result-text" id="resultText"></div>
    <div class="result-detail" id="resultDetail"></div>
  </div>

  <div class="choices" id="choices">
    <div style="display:flex;flex-direction:column;align-items:center;gap:6px;">
      <button class="choice-btn" data-choice="rock" aria-label="Rock">‚úä</button>
      <span style="font-size:0.65rem;text-transform:uppercase;letter-spacing:1px;color:var(--text-dim)">Rock</span>
    </div>
    <div style="display:flex;flex-direction:column;align-items:center;gap:6px;">
      <button class="choice-btn" data-choice="paper" aria-label="Paper">‚úã</button>
      <span style="font-size:0.65rem;text-transform:uppercase;letter-spacing:1px;color:var(--text-dim)">Paper</span>
    </div>
    <div style="display:flex;flex-direction:column;align-items:center;gap:6px;">
      <button class="choice-btn" data-choice="scissors" aria-label="Scissors">‚úåÔ∏è</button>
      <span style="font-size:0.65rem;text-transform:uppercase;letter-spacing:1px;color:var(--text-dim)">Scissors</span>
    </div>
  </div>

  <div class="streak-bar" id="streakBar">
    <span class="streak-fire">üî•</span>
    <span>Win streak:</span>
    <span class="streak-count" id="streakCount">0</span>
  </div>

  <div class="actions">
    <button class="btn btn-accent" id="resetBtn">Reset Score</button>
  </div>

  <div class="history" id="historySection" style="display:none;">
    <div class="history-title">Round History</div>
    <div class="history-list" id="historyList"></div>
  </div>

  <div class="rules">
    <button class="rules-toggle" id="rulesToggle">
      <span>üìñ How to Play</span>
      <span class="arrow">‚ñº</span>
    </button>
    <div class="rules-content" id="rulesContent">
      <ul>
        <li><span>‚úä</span> Rock crushes Scissors</li>
        <li><span>‚úã</span> Paper covers Rock</li>
        <li><span>‚úåÔ∏è</span> Scissors cuts Paper</li>
        <li><span>üéØ</span> Same choice = Tie</li>
        <li><span>‚ö°</span> First to click wins instantly ‚Äî no rounds limit!</li>
      </ul>
    </div>
  </div>

  <div class="confetti-container" id="confettiContainer"></div>

  <script>
    const CHOICES = ['rock', 'paper', 'scissors'];
    const EMOJIS = { rock: '‚úä', paper: '‚úã', scissors: '‚úåÔ∏è' };
    const WIN_MAP = { rock: 'scissors', paper: 'rock', scissors: 'paper' };
    const VERBS = { rock: 'crushes', paper: 'covers', scissors: 'cuts' };

    const WIN_MESSAGES = [
      'Nice one!', 'You crushed it!', 'Winner winner!', 'On fire!',
      'Too easy!', 'Brilliant!', 'Unstoppable!', 'GG!'
    ];
    const LOSE_MESSAGES = [
      'Ouch!', 'Better luck next time!', 'CPU strikes back!',
      'Not this time...', 'Tough break!', 'So close!'
    ];
    const TIE_MESSAGES = [
      'Great minds think alike!', 'A draw!', 'Stalemate!',
      'Jinx!', 'Mirrored!', 'Think different next time!'
    ];

    let playerScore = 0;
    let computerScore = 0;
    let winStreak = 0;
    let bestStreak = 0;
    let history = [];
    let isAnimating = false;

    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);

    const playerScoreEl = $('#playerScore');
    const computerScoreEl = $('#computerScore');
    const playerCard = $('#playerCard');
    const computerCard = $('#computerCard');
    const playerPick = $('#playerPick');
    const computerPick = $('#computerPick');
    const playerEmoji = $('#playerEmoji');
    const computerEmoji = $('#computerEmoji');
    const vsText = $('#vsText');
    const resultText = $('#resultText');
    const resultDetail = $('#resultDetail');
    const streakBar = $('#streakBar');
    const streakCount = $('#streakCount');
    const historySection = $('#historySection');
    const historyList = $('#historyList');
    const confettiContainer = $('#confettiContainer');
    const choiceBtns = $$('.choice-btn');

    function randomChoice() {
      return CHOICES[Math.floor(Math.random() * CHOICES.length)];
    }

    function randomFrom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function getResult(player, computer) {
      if (player === computer) return 'tie';
      return WIN_MAP[player] === computer ? 'win' : 'lose';
    }

    function clearArena() {
      playerPick.classList.remove('visible', 'winner');
      computerPick.classList.remove('visible', 'winner');
      vsText.classList.remove('visible');
      resultText.classList.remove('visible', 'win', 'lose', 'tie');
      resultDetail.classList.remove('visible');
      resultText.textContent = '';
      resultDetail.textContent = '';
    }

    function disableButtons() {
      choiceBtns.forEach(btn => btn.classList.add('disabled'));
    }

    function enableButtons() {
      choiceBtns.forEach(btn => btn.classList.remove('disabled'));
    }

    function pulseCard(card) {
      card.classList.remove('pulse');
      void card.offsetWidth;
      card.classList.add('pulse');
    }

    function spawnConfetti() {
      const colors = ['#34d399', '#7c5cfc', '#fbbf24', '#60a5fa', '#f87171', '#fb923c'];
      for (let i = 0; i < 30; i++) {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.style.left = Math.random() * 100 + '%';
        piece.style.top = '-10px';
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];
        piece.style.animationDelay = Math.random() * 0.5 + 's';
        piece.style.animationDuration = (1 + Math.random()) + 's';
        confettiContainer.appendChild(piece);
        setTimeout(() => piece.remove(), 2000);
      }
    }

    function addHistoryDot(result) {
      historySection.style.display = '';
      const dot = document.createElement('div');
      dot.className = 'history-dot ' + result;
      historyList.appendChild(dot);
    }

    function updateStreak(result) {
      if (result === 'win') {
        winStreak++;
        if (winStreak > bestStreak) bestStreak = winStreak;
      } else {
        winStreak = 0;
      }

      if (winStreak >= 2) {
        streakCount.textContent = winStreak;
        streakBar.classList.add('visible');
      } else {
        streakBar.classList.remove('visible');
      }
    }

    function play(playerChoice) {
      if (isAnimating) return;
      isAnimating = true;

      clearArena();
      disableButtons();

      const computerChoice = randomChoice();
      const result = getResult(playerChoice, computerChoice);

      playerEmoji.textContent = EMOJIS[playerChoice];
      computerEmoji.textContent = EMOJIS[computerChoice];

      setTimeout(() => {
        playerPick.classList.add('visible');
      }, 100);

      setTimeout(() => {
        vsText.classList.add('visible');
      }, 250);

      setTimeout(() => {
        computerPick.classList.add('visible');
      }, 400);

      setTimeout(() => {
        if (result === 'win') {
          playerScore++;
          playerScoreEl.textContent = playerScore;
          pulseCard(playerCard);
          playerPick.classList.add('winner');
          resultText.textContent = randomFrom(WIN_MESSAGES);
          resultText.classList.add('win');
          resultDetail.textContent = `${EMOJIS[playerChoice]} ${playerChoice} ${VERBS[playerChoice]} ${computerChoice} ${EMOJIS[computerChoice]}`;
          if (winStreak >= 2) spawnConfetti();
        } else if (result === 'lose') {
          computerScore++;
          computerScoreEl.textContent = computerScore;
          pulseCard(computerCard);
          computerPick.classList.add('winner');
          resultText.textContent = randomFrom(LOSE_MESSAGES);
          resultText.classList.add('lose');
          resultDetail.textContent = `${EMOJIS[computerChoice]} ${computerChoice} ${VERBS[computerChoice]} ${playerChoice} ${EMOJIS[playerChoice]}`;
        } else {
          resultText.textContent = randomFrom(TIE_MESSAGES);
          resultText.classList.add('tie');
          resultDetail.textContent = `Both chose ${EMOJIS[playerChoice]} ${playerChoice}`;
        }

        resultText.classList.add('visible');
        resultDetail.classList.add('visible');

        updateStreak(result);
        addHistoryDot(result);
        history.push({ player: playerChoice, computer: computerChoice, result });

        enableButtons();
        isAnimating = false;
      }, 700);
    }

    choiceBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        play(btn.dataset.choice);
      });
    });

    $('#resetBtn').addEventListener('click', () => {
      playerScore = 0;
      computerScore = 0;
      winStreak = 0;
      history = [];
      playerScoreEl.textContent = '0';
      computerScoreEl.textContent = '0';
      streakBar.classList.remove('visible');
      historyList.innerHTML = '';
      historySection.style.display = 'none';
      clearArena();
    });

    $('#rulesToggle').addEventListener('click', () => {
      const toggle = $('#rulesToggle');
      const content = $('#rulesContent');
      toggle.classList.toggle('open');
      content.classList.toggle('open');
    });

    document.addEventListener('keydown', (e) => {
      if (isAnimating) return;
      const keyMap = { '1': 'rock', '2': 'paper', '3': 'scissors', r: 'rock', p: 'paper', s: 'scissors' };
      const choice = keyMap[e.key.toLowerCase()];
      if (choice) play(choice);
    });
  </script>
</body>
</html>